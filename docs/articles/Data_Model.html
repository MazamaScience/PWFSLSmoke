<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Model • PWFSLSmoke</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data Model">
<meta property="og:description" content="PWFSLSmoke">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PWFSLSmoke</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.113</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/PWFSLSmoke.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Data_Model.html">Data Model</a>
    </li>
    <li>
      <a href="../articles/Maps_and_Timeseries_Plots.html">Maps and Timeseries Plots</a>
    </li>
    <li>
      <a href="../articles/NowCast.html">NowCast</a>
    </li>
    <li>
      <a href="../articles/articles/Example_Denver_Air_Quality_Forecast.html">Example: Denver Air Quality Forecast</a>
    </li>
    <li>
      <a href="../articles/articles/Example_Save_Data_as_CSV.html">Example: Save Data as CSV</a>
    </li>
    <li>
      <a href="../articles/articles/Loading_Monitoring_Data.html">Loading Monitoring Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/PWFSLSmoke/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Data_Model_files/header-attrs-2.5/header-attrs.js"></script><link href="Data_Model_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="Data_Model_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data Model</h1>
                        <h4 class="author">Mazama Science</h4>
            
            <h4 class="date">2020-02-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MazamaScience/PWFSLSmoke/blob/master/vignettes/Data_Model.Rmd"><code>vignettes/Data_Model.Rmd</code></a></small>
      <div class="hidden name"><code>Data_Model.Rmd</code></div>

    </div>

    
    
<p>This vignette explores the <code>ws_monitor</code> data model used throughout the <strong>PWFSLSmoke</strong> package to store and work with monitoring data.</p>
<p>The <strong>PWFSLSmoke</strong> package is designed to provide a compact, full-featured suite of utilities for working with PM 2.5 data used to monitor wildfire smoke. A uniform data model provides consistent data access across monitoring data available from different agencies. The core data model in this package is defined by the <code>ws_monitor</code> object used to store data associated with groups of individual monitors.</p>
<p>To work efficiently with the package it is important to understand the structure of this data object and which functions operate on it. Package functions that begin with <code>monitor_</code>, expect objects of class <code>ws_monitor</code> as their first argument. (<em>‘ws_’ stands for ‘wildfire smoke’</em>)</p>
<div id="monitoring-data" class="section level2">
<h2 class="hasAnchor">
<a href="#monitoring-data" class="anchor"></a>Monitoring Data</h2>
<p>Monitoring data will typically be obtained from an agency charged with archiving data acquired at monitoring sites. For wildfire smoke, the primary pollutant is PM 2.5 and the sites archiving this data include <a href="https://www.epa.gov/outdoor-air-quality-data">EPA</a>, <a href="https://www.airnow.gov">AirNow</a>, <a href="https://app.airsis.com/USFS">AIRSIS</a> and <a href="http://www.wrcc.dri.edu">WRCC</a>.</p>
<p>The data model for monitoring data consists of an <strong>R</strong> <code>list</code> with two dataframes: <code>data</code> and <code>meta</code>.</p>
<p>The <code>data</code> dataframe contains all hourly measurements organized with rows (the ‘unlimited’ dimension) as unique timesteps and columns as unique monitor deployments. The very first column is always named <code>datetime</code> and contains the <code>POSIXct</code> datetime in Coordinated Universal Time (UTC).</p>
<p>The <code>meta</code> dataframe contains all metadata associated with monitor deployment sites and is organized with rows as unique monitor deployments and columns as site attributes. The following columns are guaranteed to exist in the <code>meta</code> dataframe:</p>
<ul>
<li>
<code>monitorID</code> – unique ID for each site-instrument combination</li>
<li>
<code>longitude</code> – decimal degrees East</li>
<li>
<code>latitude</code> – decimal degrees North</li>
<li>
<code>elevation</code> – meters above sea level</li>
<li>
<code>timezone</code> – Olson timezone</li>
<li>
<code>countryCode</code> – ISO 3166-1 alpha-2 code</li>
<li>
<code>stateCode</code> – ISO 3166-2 alpha-2 code</li>
</ul>
<p><em>(The <a href="https://github.com/MazamaScience/MazamaSpatialUtils">MazamaSpatialUtils</a> package is used to assign timezones and state and country codes.)</em></p>
<p>Starting with version 1.0 of the package, the following additional columns (mostly for internal use) will always exist:</p>
<ul>
<li>
<code>siteName</code> – familiar name for a monitoring site</li>
<li>
<code>countyName</code> – county/province name</li>
<li>
<code>msaName</code> – US Census Bureau ‘Metropolitan/Micropolitan Statistical Area’</li>
<li>
<code>agencyName</code> – agency responsible for collecting the data</li>
<li>
<code>monitorType</code> – broad instrument categories for E-Sampler, EBAM or BAM-1020</li>
<li>
<code>siteID</code> – unique identifier for each site</li>
<li>
<code>instrumentID</code> – sequential identifier for each instrument at a single site</li>
<li>
<code>aqsID</code> – AQS site identifier (often used as the <code>siteID</code>)</li>
<li>
<code>pwfslID</code> – PWFSL site identifier (used as the <code>siteID</code> for temporary monitors)</li>
<li>
<code>pwfslDataIngestSource</code> – identifier for the source of monitoring data (e.g. AIRNOW, AIRSIS, WRCC_DUMPFILE, <em>etc.</em>)</li>
<li>
<code>telemetryAggregator</code> – data provider for temporary monitors (<em>e.g.</em> ‘wrcc’ or ‘usfs.airsis’)</li>
<li>
<code>telemetryUnitID</code> – unique ID for each monitoring site used within the <code>telemetry_aggregator</code>
</li>
</ul>
<p>These additional columns of information are much more variable and, depending on the source of data, may include many missing values.</p>
<p>It is important to note that the <code>monitorID</code> acts as a unique key that connects data with metadata. The <code>monitorID</code> is used for column names in the <code>data</code> dataframe and for row names in the <code>meta</code> dataframe. So the following will always be true:</p>
<pre><code>rownames(ws_monitor$meta) == ws_monitor$meta$monitorID
colnames(ws_monitor$data) == c('datetime', ws_monitor$meta$monitorID)</code></pre>
<p><strong>Example 1: Exploring <code>ws_monitor</code> Objects</strong></p>
<p>We will use the built-in “Northwest_Megafires” dataset and the <code><a href="../reference/monitor_subset.html">monitor_subset()</a></code> function to subset a <code>ws_monitor</code> object which we can then explore.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MazamaScience/PWFSLSmoke">PWFSLSmoke</a></span><span class="op">)</span><span class="op">)</span>

<span class="co"># Get some airnow data for Washington state in the summer of 2015</span>
<span class="co"># NOTE:  'tlim' is interpreted as UTC unless we specify 'timezone' </span>
<span class="va">N_M</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/monitor_subset.html">monitor_subset</a></span><span class="op">(</span><span class="va">Northwest_Megafires</span>,
                      tlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20150801</span>, <span class="fl">20150831</span><span class="op">)</span>,
                      timezone <span class="op">=</span> <span class="st">"America/Los_Angeles"</span><span class="op">)</span>
<span class="va">WA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/monitor_subset.html">monitor_subset</a></span><span class="op">(</span><span class="va">N_M</span>, stateCodes <span class="op">=</span> <span class="st">'WA'</span><span class="op">)</span>

<span class="co"># 'ws_monitor' objects can be identified by their class</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">WA</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "ws_monitor" "list"</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Examine the 'meta' dataframe</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">meta</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 55 19</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">meta</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "530330017_01" "530330080_01" "530050002_01" "530330024_01" "530330057_01"
##  [6] "530332004_01" "530530029_01" "530530031_01" "530610005_01" "530611007_01"
## [11] "530630047_01" "530670013_01" "530531018_01" "530272002_01" "530310003_01"
## [16] "530730015_01" "530251002_01" "530650004_01" "530010003_01" "530750006_01"
## [21] "530750003_01" "530331011_01" "530210002_01" "530330037_01" "530710005_01"
## [26] "530750005_01" "530150015_01" "530470009_01" "530370002_01" "530090013_01"
## [31] "530610020_01" "530070010_01" "530770015_01" "530650002_01" "530470010_01"
## [36] "530770009_01" "530570015_01" "530130002_01" "530030004_01" "530110022_01"
## [41] "530579999_01" "530639997_01" "530299999_01" "530639996_01" "530410004_01"
## [46] "530770016_01" "530090015_01" "530450007_01" "530470013_01" "530570011_01"
## [51] "530350007_01" "530070011_01" "530330030_01" "530110024_01" "530090017_01"</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">meta</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "monitorID"             "longitude"             "latitude"             
##  [4] "elevation"             "timezone"              "countryCode"          
##  [7] "stateCode"             "siteName"              "agencyName"           
## [10] "countyName"            "msaName"               "monitorType"          
## [13] "siteID"                "instrumentID"          "aqsID"                
## [16] "pwfslID"               "pwfslDataIngestSource" "telemetryAggregator"  
## [19] "telemetryUnitID"</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Examine the 'data' dataframe</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 721  56</code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "datetime"     "530330017_01" "530330080_01" "530050002_01" "530330024_01"
##  [6] "530330057_01" "530332004_01" "530530029_01" "530530031_01" "530610005_01"
## [11] "530611007_01" "530630047_01" "530670013_01" "530531018_01" "530272002_01"
## [16] "530310003_01" "530730015_01" "530251002_01" "530650004_01" "530010003_01"
## [21] "530750006_01" "530750003_01" "530331011_01" "530210002_01" "530330037_01"
## [26] "530710005_01" "530750005_01" "530150015_01" "530470009_01" "530370002_01"
## [31] "530090013_01" "530610020_01" "530070010_01" "530770015_01" "530650002_01"
## [36] "530470010_01" "530770009_01" "530570015_01" "530130002_01" "530030004_01"
## [41] "530110022_01" "530579999_01" "530639997_01" "530299999_01" "530639996_01"
## [46] "530410004_01" "530770016_01" "530090015_01" "530450007_01" "530470013_01"
## [51] "530570011_01" "530350007_01" "530070011_01" "530330030_01" "530110024_01"
## [56] "530090017_01"</code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This should always be true</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">meta</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">WA</span><span class="op">$</span><span class="va">data</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Example 2: Manipulating <code>ws_monitor</code> Objects</strong></p>
<p>The <strong>PWFSLSmoke</strong> package has numerous functions that can work with <code>ws_monitor</code> objects, all of which begin with <code>monitor_</code>. If you need to do something that the package functions do not provide, you can manipulate <code>ws_monitor</code> objects directly as long as you retain the structure of the data model.</p>
<p>Functions that accept and return <code>ws_monitor</code> objects include:</p>
<ul>
<li><code><a href="../reference/monitor_aqi.html">monitor_aqi()</a></code></li>
<li><code><a href="../reference/monitor_collapse.html">monitor_collapse()</a></code></li>
<li><code><a href="../reference/monitor_dailyStatistic.html">monitor_dailyStatistic()</a></code></li>
<li><code><a href="../reference/monitor_dailyThreshold.html">monitor_dailyThreshold()</a></code></li>
<li><code><a href="../reference/monitor_join.html">monitor_join()</a></code></li>
<li><code><a href="../reference/monitor_nowcast.html">monitor_nowcast()</a></code></li>
<li><code><a href="../reference/monitor_reorder.html">monitor_reorder()</a></code></li>
<li><code><a href="../reference/monitor_replaceData.html">monitor_replaceData()</a></code></li>
<li><code><a href="../reference/monitor_rollingMean.html">monitor_rollingMean()</a></code></li>
<li><code><a href="../reference/monitor_scaleData.html">monitor_scaleData()</a></code></li>
<li><code><a href="../reference/monitor_subset.html">monitor_subset()</a></code></li>
<li><code><a href="../reference/monitor_subsetBy.html">monitor_subsetBy()</a></code></li>
<li><code><a href="../reference/monitor_subsetByDistance.html">monitor_subsetByDistance()</a></code></li>
<li><code><a href="../reference/monitor_trim.html">monitor_trim()</a></code></li>
</ul>
<p>These functions can be used with the <strong>magrittr</strong> package <code><a href="../reference/%&gt;%.html">%&gt;%</a></code> pipe as in the following example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Calculate daily means for the Methow Valley from monitors in Twisp and Winthrop</span>
<span class="va">TwispID</span> <span class="op">&lt;-</span> <span class="st">'530470009_01'</span>
<span class="va">WinthropID</span> <span class="op">&lt;-</span> <span class="st">'530470010_01'</span>
<span class="va">Methow_Valley_JulyMeans</span> <span class="op">&lt;-</span> 
  <span class="va">Northwest_Megafires</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/monitor_subset.html">monitor_subset</a></span><span class="op">(</span>monitorIDs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">TwispID</span>,<span class="va">WinthropID</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/monitor_collapse.html">monitor_collapse</a></span><span class="op">(</span>monitorID <span class="op">=</span> <span class="st">'MethowValley'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/monitor_subset.html">monitor_subset</a></span><span class="op">(</span>tlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20150701</span>, <span class="fl">20150731</span><span class="op">)</span>, timezone <span class="op">=</span> <span class="st">'America/Los_Angeles'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/monitor_dailyStatistic.html">monitor_dailyStatistic</a></span><span class="op">(</span>minHours <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>
<span class="co"># Look at the first week</span>
<span class="va">Methow_Valley_JulyMeans</span><span class="op">$</span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>,<span class="op">]</span></code></pre></div>
<pre><code>##     datetime MethowValley
## 1 2015-07-01      5.06875
## 2 2015-07-02      5.45625
## 3 2015-07-03      6.64375
## 4 2015-07-04     10.60625
## 5 2015-07-05     10.33750
## 6 2015-07-06     13.93750
## 7 2015-07-07     30.68542</code></pre>
<p>The following code mixes use of package functions with direct manipulation of the <code>ws_monitor</code> object.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use special knowledge of AirNow IDs to subset airnow data for Spokane county monitors</span>
<span class="va">SpokaneCountyIDs</span> <span class="op">&lt;-</span> <span class="va">N_M</span><span class="op">$</span><span class="va">meta</span><span class="op">$</span><span class="va">monitorID</span><span class="op">[</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">N_M</span><span class="op">$</span><span class="va">meta</span><span class="op">$</span><span class="va">monitorID</span>, <span class="st">"^53063"</span><span class="op">)</span><span class="op">]</span>
<span class="va">Spokane</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/monitor_subset.html">monitor_subset</a></span><span class="op">(</span><span class="va">N_M</span>, monitorIDs <span class="op">=</span> <span class="va">SpokaneCountyIDs</span><span class="op">)</span>

<span class="co"># Apply 3-hr rolling mean</span>
<span class="va">Spokane_3hr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/monitor_rollingMean.html">monitor_rollingMean</a></span><span class="op">(</span><span class="va">Spokane</span>, <span class="fl">3</span>, align <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>

<span class="co"># 1) Replace data columns with their squares (exponentiation is not supplied by the package)</span>
<span class="va">Spokane_3hr_squared</span> <span class="op">&lt;-</span> <span class="va">Spokane_3hr</span>
<span class="va">Spokane_3hr_squared</span><span class="op">$</span><span class="va">data</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">Spokane_3hr</span><span class="op">$</span><span class="va">data</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="co"># exclude the 'datetime' column</span>

<span class="co"># NOTE:  Exponentiation is only used as an example. It does not generate a meaningful result.</span>

<span class="co"># Create a daily averaged 'ws_monitor' object</span>
<span class="va">Spokane_daily_3hr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/monitor_dailyStatistic.html">monitor_dailyStatistic</a></span><span class="op">(</span><span class="va">Spokane_3hr</span><span class="op">)</span>

<span class="co"># 2) Check out the correlation between monitors (correlation is not supplied by the package)</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">Spokane_daily_3hr</span><span class="op">$</span><span class="va">data</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="co"># exclude the 'datetime' column</span>
<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">data</span>, use <span class="op">=</span> <span class="st">'complete.obs'</span><span class="op">)</span></code></pre></div>
<pre><code>##              530630047_01 530639997_01 530639996_01
## 530630047_01    1.0000000    0.9148673    0.9159997
## 530639997_01    0.9148673    1.0000000    0.9284175
## 530639996_01    0.9159997    0.9284175    1.0000000</code></pre>
<hr>
<p>This introduction to the <code>ws_monitor</code> data model should be enough to get you started. Lots more documentation and examples are available in the package documentation.</p>
<p>Best of luck exploring and understanding PM 2.5 values associated with wildfire smoke!</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Hans Martin, Spencer Pease, Helen Miller, Zach Dingels, Rohan Aras, Jon Hagg, Jimin Kim, Rex Thompson, Alice Yang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
